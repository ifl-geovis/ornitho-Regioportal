/*! leaflet_wms,app,layers */
!function(t){if(void 0===this.L)throw"Leaflet must be loaded first!";this.L.WMS=this.L.wms=function(t){var e={};e.Source=t.Layer.extend({options:{untiled:!0,identify:!1},initialize:function(e,i){t.setOptions(this,i),this._url=e,this._subLayers={},this._overlay=this.createOverlay(this.options.untiled)},createOverlay:function(t){var i={};for(var r in this.options)"untiled"!=r&&"identify"!=r&&(i[r]=this.options[r]);return t?e.overlay(this._url,i):e.tileLayer(this._url,i)},onAdd:function(){},setOpacity:function(t){this.options.opacity=t,this._overlay&&this._overlay.setOpacity(t)},getLayer:function(t){return e.layer(this,t)},addSubLayer:function(t){this._subLayers[t]=!0,this.refreshOverlay()},removeSubLayer:function(t){delete this._subLayers[t],this.refreshOverlay()},refreshOverlay:function(){var t=Object.keys(this._subLayers).join(",");this._map&&(t?(this._overlay.setParams({layers:t}),this._overlay.addTo(this._map)):this._overlay.remove())}}),e.source=function(t,i){return new e.Source(t,i)},e.Layer=t.Layer.extend({initialize:function(i,r,s){t.setOptions(this,s),i.addSubLayer||(i=e.getSourceForUrl(i,s)),this._source=i,this._name=r},onAdd:function(){this._source._map||this._source.addTo(this._map),this._source.addSubLayer(this._name)},onRemove:function(){this._source.removeSubLayer(this._name)},setOpacity:function(t){this._source.setOpacity(t)}}),e.layer=function(t,i){return new e.Layer(t,i)};var i={};return e.getSourceForUrl=function(t,r){return i[t]||(i[t]=e.source(t,r)),i[t]},e.Overlay=t.Layer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},options:{crs:null,uppercase:!1,attribution:"",opacity:1},initialize:function(e,i){this._url=e;var r={},s={};for(var a in i)a in this.options?s[a]=i[a]:r[a]=i[a];t.setOptions(this,s),this.wmsParams=t.extend({},this.defaultWmsParams,r)},setParams:function(e){t.extend(this.wmsParams,e),this.update()},getAttribution:function(){return this.options.attribution},onAdd:function(){this.update()},onRemove:function(t){this._currentOverlay&&(t.removeLayer(this._currentOverlay),delete this._currentOverlay),this._currentUrl&&delete this._currentUrl},getEvents:function(){return{moveend:this.update}},update:function(){if(this._map){this.updateWmsParams();var e=this.getImageUrl();if(this._currentUrl!=e){this._currentUrl=e;var i=this._map.getBounds(),r={opacity:0};this.options.pane&&(r.pane=this.options.pane);var s=t.imageOverlay(e,i,r);s.addTo(this._map),s.once("load",function(){this._map&&(s._url==this._currentUrl?(this._currentOverlay&&this._map.removeLayer(this._currentOverlay),this._currentOverlay=s,s.setOpacity(this.options.opacity?this.options.opacity:1)):this._map.removeLayer(s))},this),(this._map.getZoom()<this.options.minZoom||this._map.getZoom()>this.options.maxZoom)&&this._map.removeLayer(s)}}},setOpacity:function(t){this.options.opacity=t,this._currentOverlay&&this._currentOverlay.setOpacity(t)},updateWmsParams:function(e){e||(e=this._map);var i=e.getBounds(),r=e.getSize(),s=parseFloat(this.wmsParams.version),a=this.options.crs||e.options.crs,n=s>=1.3?"crs":"srs",o=a.project(i.getNorthWest()),u=a.project(i.getSouthEast()),h={width:r.x,height:r.y};h[n]=a.code,h.bbox=(s>=1.3&&a===t.CRS.EPSG4326?[u.y,o.x,o.y,u.x]:[o.x,u.y,u.x,o.y]).join(","),t.extend(this.wmsParams,h)},getImageUrl:function(){var e=this.options.uppercase||!1,i=t.Util.getParamString(this.wmsParams,this._url,e);return this._url+i}}),e.overlay=function(t,i){return new e.Overlay(t,i)},e}(this.L)}();function delay(e){return new Promise(t=>{setTimeout(t,e)})}function checkYear(e,t){var a=e>t;return a&&([queryObject.year[0],queryObject.year[1]]=[queryObject.year[1],queryObject.year[0]],$("#yearselector_from").val(t).trigger("change"),$("#yearselector_to").val(e).trigger("change")),year_select=a?t+"-"+e:e+"-"+t}function checkDecades(e,t){e>t&&(queryObject.tp[1]=e,$("#decadeselector_to").val(e).trigger("change"),infoObject.decade_to=decadeArray[Math.ceil(parseInt(e)/3)-1].children.find(t=>t.id==parseInt(e)).to),t-e>8&&(queryObject.tp[1]=e+8,$("#decadeselector_to").val(e+8).trigger("change"),infoObject.decade_to=decadeArray[Math.ceil(parseInt(e)/3)+1].children.find(t=>t.id==parseInt(e+8)).to)}function formatInfoMessage(){var e,t=infoObject.season_select,a=infoObject.decade_from,r=infoObject.decade_to,o=queryObject.year[0],n=queryObject.year[1];if("SEASON"==queryObject.ts)e=t+", "+(o==n?"Dezember-Februar"==t?o+"-"+(o+1):o:checkYear(o,n));else if("DECADE"==queryObject.ts){var s=r.split(".");e=a+" - "+(r="xx"==s[0]?r.replace("xx",new Date(o,parseInt(s[1]),0).getDate()):r)+" ("+(o==n?o:checkYear(o,n))+")"}return("NON"!=birdlayerConf.id?infoObject.species_name+infoObject.species_prot+", ":"")+e+(""!==infoObject.species_prot&&"NON"!=birdlayerConf.id?"<span class='infoTxt'>(Aus Schutzgründen nur begrenzter Zoom möglich)</span>":"")}function startSearchDB(){infoMessage.setContent(formatInfoMessage()),birddata.setParams(queryObject),sightings.setParams(queryObject)}$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip(),$("#imprint").load("components/impr.html"),$("#privacy").load("components/datap.html"),$(window).resize(function(){$(window).width()>992?$("#navbarCollapse").collapse("hide"):$("#divseparator").hasClass("showing_f")&&($("#map").css("marginTop","9.4rem"),$("#map").css("min-height","calc(100vh - 10.4rem)"))}),$("#seasonselector input").on("change",function(){"5"!=this.id?($("#divseparator").hasClass("showing_f")&&($("#divseparator").removeClass("showing_f").addClass("hiding"),$("#decadeselector").removeClass("showing_f").addClass("hiding"),$("#map").css("marginTop","9.4rem"),$("#map").css("min-height","calc(100vh - 10.4rem)")),queryObject.ts="SEASON",queryObject.tp=Array.from([this.id,this.id],Number),infoObject.season_select=this.parentElement.dataset.originalTitle):($("#divseparator").removeClass("hiding").addClass("showing_f"),$("#decadeselector").removeClass("hiding").addClass("showing_f"),$(window).width()>992&&($("#map").css("marginTop","11.6rem"),$("#map").css("min-height","calc(100vh - 12.6rem)")),queryObject.ts="DECADE",queryObject.tp=Array.from([1,1],Number))}),$("#decadeselector_from").select2({width:"14.8rem",dropdownCssClass:"mediumdrop",data:decadeArray}),$("#decadeselector_from").on("select2:select",function(e){queryObject.tp[0]=e.params.data.id,infoObject.decade_from=e.params.data.from,checkDecades(queryObject.tp[0],queryObject.tp[1])}),$("#decadeselector_to").select2({width:"14.8rem",dropdownCssClass:"mediumdrop",data:decadeArray}),$("#decadeselector_to").on("select2:select",function(e){queryObject.tp[1]=e.params.data.id,infoObject.decade_to=e.params.data.to,checkDecades(queryObject.tp[0],queryObject.tp[1])}),$("#yearselector_from").select2({width:"8.6rem",dropdownCssClass:"smalldrop",data:yearArray}),$("#yearselector_from").on("select2:select",function(e){queryObject.year[0]=parseInt(e.params.data.id)}),$("#yearselector_to").select2({width:"8.6rem",dropdownCssClass:"smalldrop",data:yearArray}),$("#yearselector_to").on("select2:select",function(e){queryObject.year[1]=parseInt(e.params.data.id)}),$("#yearselector_from").val(queryObject.year[0]).trigger("change"),$("#yearselector_to").val(queryObject.year[1]).trigger("change"),$("#submit").click(function(){startSearchDB()}),$.ajax({url:"php/getNavbarData.php",type:"GET",dataType:"json",contentType:"application/json; charset=utf-8",data:{id:"species",pm:searchpriv}}).done(function(e){var t=$.parseJSON(e).results;$("#species-search-input").prepend("<option selected></option>").select2({width:"40%",placeholder:"Artname",allowClear:!0,selectOnClose:!1,tokenSeparators:[","," "],data:t}),$("#species-search-input").val(sid).trigger("change"),$("#species-search-input").trigger({type:"select2:select",params:{data:t.find(e=>e.id==parseInt(sid))}})}),$("#species-search-input").on("select2:select",function(e){queryObject.sid=parseInt(e.params.data.id),infoObject.species_name=e.params.data.text,"50"==e.params.data.pm?(infoObject.species_prot=" (sensible Art)",map.setMaxZoom(7.5)):"25"==e.params.data.pm?(infoObject.species_prot=" (sensible Art)",map.setMaxZoom(9.5)):(infoObject.species_prot="",1==infoObject.hmf?map.setMaxZoom(14):map.setMaxZoom(11.5)),startSearchDB(),map.hasLayer(birddata)||($("#layer-input").val("VOR").trigger("change"),setBirdLayers("VOR"))}),$("#species-search-input").on("select2:unselecting",function(e){queryObject.sid=0,infoObject.species_prot="",1==infoObject.hmf?map.setMaxZoom(14):map.setMaxZoom(11.5),$("#layer-input").val("NON").trigger("change"),setBirdLayers("NON")}),$("#places-search-input").prepend("<option selected></option>").select2({width:"40%",placeholder:"Ort",allowClear:!0,selectOnClose:!1,minimumInputLength:3,ajax:{url:"php/getNavbarData.php",type:"GET",contentType:"application/json; charset=utf-8",delay:250,quietMillis:100,data:function(e){return{id:"location",qstr:e.term}},processResults:function(e){return null!=$.parseJSON(e).results?{results:$.parseJSON(e).results}:{results:[{id:0,text:""}]}},cache:!0}}),$("#places-search-input").on("select2:select",function(e){if(queryObject.lid=e.params.data.id,0!=queryObject.lid){district.setParams({lid:queryObject.lid});queryObject.grid;var t=e.params.data.value,a=L.latLng(t[3],t[2]),r=L.latLng(t[1],t[0]);district_bounds=L.latLngBounds(a,r),""===infoObject.species_prot?"1"==e.params.data.hmf?(infoObject.hmf=1,maxzoom=14):(infoObject.hmf=0,maxzoom=11.5):(infoObject.hmf=e.params.data.hmf,maxzoom=map.getMaxZoom()),(async()=>{map.fitBounds(district_bounds,{padding:[50,50],maxZoom:maxzoom}),await delay(1e3),infoObject.grid_start==queryObject.grid&&startSearchDB(),map.setMaxZoom(maxzoom)})()}}),$("#places-search-input").on("select2:unselecting",function(e){queryObject.lid=2e3,infoObject.hmf=0,""===infoObject.species_prot&&map.setMaxZoom(11.5),district.setParams({lid:0}),startSearchDB()}),$("#layer-input").select2({width:"18%",minimumResultsForSearch:-1}),$("#layer-input").val("VOR").trigger("change"),$("#layer-input").on("select2:select",function(e){setBirdLayers(e.params.data.id)})});var district_bounds,southWest=L.latLng(46.3024876979,4.98865807458),northEast=L.latLng(55.983104153,16.0169958839),bld_bounds=L.latLngBounds(southWest,northEast),map=L.map("map",{center:[51.16338,10.44768],crs:L.CRS.EPSG3857,maxBounds:bld_bounds,minZoom:6,maxZoom:11.5,zoomSnap:.5,zoomDelta:.5,wheelPxPerZoomLevel:50,zoomControl:!1,attributionControl:!1});map.fitBounds(bld_bounds),map.setMinZoom(map.getBoundsZoom(bld_bounds));var infoMessage=(new(infoMessage=L.Control.extend({options:{position:"topleft"},onAdd:function(){return L.DomUtil.get("infoMsg")},setContent:function(e){this.getContainer().innerHTML=e}}))).addTo(map),imprintLink=L.Control.extend({options:{position:"bottomleft"},onAdd:function(e){var t=L.DomUtil.create("div","leaflet-imprint leaflet-control"),a=L.DomUtil.create("a");return a.href="#",a.textContent="Impressum & Datenschutzerklärung",a.title="Impressum & Datenschutzerklärung",t.onclick=function(){$("#info_Modal").modal("show")},t.appendChild(a),t}});map.addControl(new imprintLink);var attribution=new L.Control.Attribution({prefix:"",position:"bottomleft"});map.addControl(attribution),L.control.zoom({position:"bottomright"}).addTo(map);var maxZoomButton=L.Control.extend({options:{position:"bottomright"},onAdd:function(e){var t=L.DomUtil.create("div","leaflet-bar leaflet-control leaflet-control-custom"),a=L.DomUtil.create("a","icon-globe leaflet-control-zoom-max");return a.href="#",a.title="Zoom auf Auswahl",t.onclick=function(){2e3==queryObject.lid?e.setZoom(e.getBoundsZoom(bld_bounds)):e.fitBounds(district_bounds)},t.appendChild(a),t}});map.addControl(new maxZoomButton);var latlng,mapCoordinates=(new(mapCoordinates=L.Control.extend({options:{position:"bottomleft"},onAdd:function(e){return L.DomUtil.create("div","leaflet-coordinates")},onRemove:function(e){},setContent:function(e){this.getContainer().innerHTML=e}}))).addTo(map);function getColor_grid(e){return"sehr hoch"==e?"#3333ff":"hoch"==e?"#6666ff":"mäßig"==e?"#9999ff":"gering"==e?"#ccccff":"#fafafa"}function getColor_circ(e){return"sicher"==e?"#FF0000":"wahrscheinlich"==e?"#ffa500":"möglich"==e?"#FFFF00":"#fafafa"}function createLegend(e,t){for(var a=document.createElement("table"),r=document.createElement("tbody"),o=Object.entries(t),n=0;n<o.length;n++){var s=document.createElement("tr");switch(e.className){case"leaflet-legend-vorkommen":s.innerHTML='<td><i class="circle fillbrown" style="border:1px solid"></i></td><td>'+o[n][1]+"</td>";break;case"leaflet-legend-bzcode":s.innerHTML='<td><i class="circle" style="border:1px solid; background:'+getColor_circ(o[n][1])+'"></i></td><td>'+o[n][1]+"</td>";break;case"leaflet-legend-beob":s.innerHTML='<td><i style="border:1px solid; background:'+getColor_grid(o[n][0])+'"></i></td><td>'+o[n][0]+'<span class="small">'+o[n][1]+"</span></td>";break;case"leaflet-legend-spa":s.innerHTML='<td><i class="fillgreen" style="border:1px solid"></i></td><td>'+o[n][1]+"</td>";break;case"leaflet-legend-temp":case"leaflet-legend-prec":s.innerHTML="<td><img src="+o[n][1]+"></td>"}r.appendChild(s)}return a.appendChild(r),e.appendChild(a),e}map.on("mousemove",function(e){latlng="Lat: "+Math.round(1e3*e.latlng.lat)/1e3+", Lon: "+Math.round(1e3*e.latlng.lng)/1e3,mapCoordinates.setContent(latlng)}),map.on("mouseout",function(e){}),L.control.scale({position:"bottomleft",maxWidth:200,imperial:!1}).addTo(map);var mapLegend=L.Control.extend({options:{position:"topleft"},onAdd:function(e){var t=L.DomUtil.create("div","leaflet-legend"),a=L.DomUtil.create("div","leaflet-legend-vorkommen");a.innerHTML="<strong>Vorkommen</strong><br/>",t.appendChild(createLegend(a,{1:"Art gemeldet"}));var r=L.DomUtil.create("div","leaflet-legend-bzcode");r.innerHTML="<strong>Max. Brutstatus</strong><br/>",r.style.display="none",t.appendChild(createLegend(r,{1:"unbekannt",2:"möglich",3:"wahrscheinlich",4:"sicher"}));var o=L.DomUtil.create("div","leaflet-legend-beob");o.style.paddingTop="0.7rem",o.innerHTML="<strong>Meldeaktivität aller Arten</strong><br/>",t.appendChild(createLegend(o,{keine:" (0 Beobachtungen)",gering:" (1-19 Beobachtungen)","mäßig":" (20-99 Beobachtungen)",hoch:" (100-500 Beobachtungen)","sehr hoch":" (>500 Beobachtungen)"}));var n=L.DomUtil.create("div","leaflet-legend-spa");n.style.paddingTop="0.7rem",n.innerHTML="<strong>Natura2000-Gebiete</strong><br/>",n.style.display="none",t.appendChild(createLegend(n,{1:"Vogelschutzgebiete"}));var s=L.DomUtil.create("div","leaflet-legend-temp");s.style.paddingTop="0.7rem",s.innerHTML="<strong>mttl. Lufttemperatur (1961-1990)</strong><br/>",s.style.display="none",t.appendChild(createLegend(s,{1:"../img/dwd_temp.png"}));var i=L.DomUtil.create("div","leaflet-legend-prec");return i.style.paddingTop="0.7rem",i.innerHTML="<strong>mttl. Niederschlag (1961-1990)</strong><br/>",i.style.display="none",t.appendChild(createLegend(i,{1:"../img/dwd_prec.png"})),t}});map.addControl(new mapLegend),$(document).one("ajaxStop",function(){$("#loader").hide()});map.createPane("vg250").style.zIndex=200,map.createPane("district").style.zIndex=210,map.createPane("dlm250").style.zIndex=220,map.createPane("natura2000").style.zIndex=230,map.createPane("sightings").style.zIndex=400,map.createPane("birddata").style.zIndex=450,map.createPane("tkgrid").style.zIndex=500;var none=L.tileLayer(""),webatlas=L.tileLayer.wms(layersObject.bkg.url.webatlas,{version:"1.3.0",layers:layersObject.bkg.name.webatlas,attribution:layersObject.bkg.attr}).addTo(map),osm=L.tileLayer(layersObject.osm.url,{attribution:layersObject.osm.attr,maxZoom:14,minZoom:8}),esri=L.tileLayer(layersObject.esri.url,{attribution:layersObject.esri.attr,maxZoom:14,minZoom:8}),clc=L.tileLayer.wms(layersObject.dlr.url,{layers:layersObject.dlr.name,attribution:layersObject.dlr.attr}),relief=L.tileLayer.wms(layersObject.bkg.url.relief,{layers:layersObject.bkg.name.relief,attribution:layersObject.bkg.attr,maxZoom:12}),airtemp=L.tileLayer.wms(layersObject.dwd.url,{layers:layersObject.dwd.name.temp,attribution:layersObject.dwd.attr,maxZoom:10}),precip=L.tileLayer.wms(layersObject.dwd.url,{layers:layersObject.dwd.name.prec,attribution:layersObject.dwd.attr,maxZoom:10}),district=L.WMS.overlay(layersObject.mapserver.url,{crs:L.CRS.EPSG3857,transparent:!0,version:"1.3.0",layers:layersObject.mapserver.name.district,format:"image/png",pane:"district"}).addTo(map),natura2000=L.WMS.overlay(layersObject.mapserver.url,{crs:L.CRS.EPSG3857,transparent:!0,version:"1.3.0",layers:layersObject.mapserver.name.natura2000,format:"image/png",attribution:layersObject.mapserver.natura2000.attr,pane:"natura2000"}),vg250=L.WMS.source(layersObject.bkg.url.vg250,{transparent:!0,format:layersObject.bkg.format,attribution:layersObject.bkg.attr,pane:"vg250"});vg250.getLayer(layersObject.bkg.name.sta).addTo(map);var vg250_lan=vg250.getLayer(layersObject.bkg.name.lan),vg250_krs=vg250.getLayer(layersObject.bkg.name.krs),vg250_gem=vg250.getLayer(layersObject.bkg.name.gem),tkgrid=L.WMS.source(layersObject.mapserver.url,{crs:L.CRS.EPSG3857,transparent:!0,version:"1.3.0",format:"image/png",pane:"tkgrid"}),ref_tk50=tkgrid.getLayer(layersObject.mapserver.name.tk50),ref_tk25=tkgrid.getLayer(layersObject.mapserver.name.tk25),ref_tk25vrt=tkgrid.getLayer(layersObject.mapserver.name.tk25vrt),dlm250=L.WMS.overlay(layersObject.bkg.url.dlm250,{transparent:!0,layers:layersObject.bkg.name.hyd,format:"image/png",attribution:layersObject.bkg.attr,pane:"dlm250"}),birddata=L.WMS.overlay(layersObject.mapserver.url,{crs:L.CRS.EPSG3857,transparent:!0,version:"1.3.0",layers:layersObject.mapserver.name.birdd,format:"image/png",pane:"birddata"}),sightings=L.WMS.overlay(layersObject.mapserver.url,{crs:L.CRS.EPSG3857,transparent:!0,version:"1.3.0",layers:layersObject.mapserver.name.sight,format:"image/png",pane:"sightings"});(async()=>{await delay(1e3),sightings.addTo(map),setGridLayers("tk50")})();var baseMaps={"-Ohne-":none,WebAtlasDE:webatlas,OpenStreetMap:osm,"ESRI-Satellite":esri,Landbedeckung:clc,Lufttemperatur:airtemp,Niederschlag:precip,Relief:relief},overlayMaps={"Bundesländer":vg250_lan,Kreise:vg250_krs,Gemeinden:vg250_gem,"TK50 Raster":ref_tk50,"TK25 Raster":ref_tk25,"TK25/4 Raster":ref_tk25vrt,"Gewässer":dlm250,Vogelschutzgebiete:natura2000,"Meldeaktivität":sightings},layerControl=L.control.layers(baseMaps,overlayMaps).addTo(map);$("<h2>Kartengrundlage</h2>").insertBefore("div.leaflet-control-layers-base"),map.on("baselayerchange",function(e){"Lufttemperatur"==e.name?($(".leaflet-legend-temp").show(),$(".leaflet-legend-prec").hide()):"Niederschlag"==e.name?($(".leaflet-legend-temp").hide(),$(".leaflet-legend-prec").show()):($(".leaflet-legend-temp").hide(),$(".leaflet-legend-prec").hide())});var checked_tk50=!0,checked_tk25=!0,checked_tk25vrt=!0;function setGridLayers(e){switch(e){case"tk50":map.hasLayer(ref_tk50)&&(map.removeLayer(ref_tk50),checked_tk50=!0),map.hasLayer(ref_tk25)&&(map.removeLayer(ref_tk25),checked_tk25=!0),map.hasLayer(ref_tk25vrt)&&(map.removeLayer(ref_tk25vrt),checked_tk25vrt=!0),$(".leaflet-control-layers-overlays > label:nth-child(4)").css("display","none"),$(".leaflet-control-layers-overlays > label:nth-child(5)").css("display","none"),$(".leaflet-control-layers-overlays > label:nth-child(6)").css("display","none");break;case"tk25":!map.hasLayer(ref_tk50)&&checked_tk50&&map.addLayer(ref_tk50),$(".leaflet-control-layers-overlays > label:nth-child(4)").css("display","inherit"),map.hasLayer(ref_tk25)&&(map.removeLayer(ref_tk25),checked_tk25=!0),map.hasLayer(ref_tk25vrt)&&(map.removeLayer(ref_tk25vrt),checked_tk25vrt=!0),$(".leaflet-control-layers-overlays > label:nth-child(5)").css("display","none"),$(".leaflet-control-layers-overlays > label:nth-child(6)").css("display","none");break;case"tk25vrt":!map.hasLayer(ref_tk25)&&checked_tk25&&map.addLayer(ref_tk25),$(".leaflet-control-layers-overlays > label:nth-child(5)").css("display","inherit"),map.hasLayer(ref_tk50)&&(map.removeLayer(ref_tk50),checked_tk50=!0),map.hasLayer(ref_tk25vrt)&&(map.removeLayer(ref_tk25vrt),checked_tk25vrt=!0),$(".leaflet-control-layers-overlays > label:nth-child(4)").css("display","none"),$(".leaflet-control-layers-overlays > label:nth-child(6)").css("display","none");break;case"tk25hmf":!map.hasLayer(ref_tk25vrt)&&checked_tk25vrt&&map.addLayer(ref_tk25vrt),$(".leaflet-control-layers-overlays > label:nth-child(6)").css("display","inherit"),map.hasLayer(ref_tk50)&&(map.removeLayer(ref_tk50),checked_tk50=!0),map.hasLayer(ref_tk25)&&(map.removeLayer(ref_tk25),checked_tk25=!0),$(".leaflet-control-layers-overlays > label:nth-child(4)").css("display","none"),$(".leaflet-control-layers-overlays > label:nth-child(5)").css("display","none")}}map.on("overlayadd",function(e){0!=$(".leaflet-legend").children(":visible").length||"Meldeaktivität"!=e.name&&"Vogelschutzgebiete"!=e.name||$(".leaflet-legend").show(),"Meldeaktivität"==e.name?$(".leaflet-legend-beob").show():"Vogelschutzgebiete"==e.name&&$(".leaflet-legend-spa").show(),"TK50 Raster"==e.name&&(checked_tk50=!0),"TK25 Raster"==e.name&&(checked_tk25=!0),"TK25/4 Raster"==e.name&&(checked_tk25vrt=!0)}),map.on("overlayremove",function(e){"Meldeaktivität"==e.name?$(".leaflet-legend-beob").hide():"Vogelschutzgebiete"==e.name&&$(".leaflet-legend-spa").hide(),0==$(".leaflet-legend").children(":visible").length&&$(".leaflet-legend").hide(),"TK50 Raster"==e.name&&(checked_tk50=!1),"TK25 Raster"==e.name&&(checked_tk25=!1),"TK25/4 Raster"==e.name&&(checked_tk25vrt=!1)}),map.on("movestart zoomstart",function(){infoObject.grid_start=queryObject.grid}),map.on("zoomend",function(){var e=map.getZoom();switch(!0){case e>=8&&e<10:"tk25"!=queryObject.grid&&(queryObject.grid="tk25",startSearchDB(),setGridLayers("tk25"));break;case e>=10&&e<12:e>10&&(map.hasLayer(airtemp)||map.hasLayer(precip))&&$(".leaflet-control-layers-base").find("input:radio:nth(1)").prop("checked",!0).trigger("click"),"tk25vrt"!=queryObject.grid&&(queryObject.grid="tk25vrt",startSearchDB(),setGridLayers("tk25vrt"));break;case e>=12:e>12&&map.hasLayer(relief)&&$(".leaflet-control-layers-base").find("input:radio:nth(1)").prop("checked",!0).trigger("click"),"tk25hmf"!=queryObject.grid&&(queryObject.grid="tk25hmf",startSearchDB(),setGridLayers("tk25hmf"));break;default:(map.hasLayer(osm)||map.hasLayer(esri))&&$(".leaflet-control-layers-base").find("input:radio:nth(1)").prop("checked",!0).trigger("click"),"tk50"!=queryObject.grid&&(queryObject.grid="tk50",startSearchDB(),setGridLayers("tk50"))}});var birdlayerConf={id:"VOR",sld:""};function setBirdLayers(e){"NON"!=birdlayerConf.id&&("VOR"==birdlayerConf.id?$(".leaflet-legend-vorkommen").hide():$(".leaflet-legend-bzcode").hide()),"NON"==e?(map.removeLayer(birddata),0==$(".leaflet-legend").children(":visible").length&&$(".leaflet-legend").hide()):(birdlayerConf.sld="VOR"==e?"vorkommen.xml":"brutzeitcode.xml",map.hasLayer(birddata)?birddata.setParams({sld:layersObject.mapserver.sld+birdlayerConf.sld}):(birddata.wmsParams.sld=layersObject.mapserver.sld+birdlayerConf.sld,map.addLayer(birddata)),0==$(".leaflet-legend").children(":visible").length&&$(".leaflet-legend").show(),"VOR"==e?$(".leaflet-legend-vorkommen").show():$(".leaflet-legend-bzcode").show()),birdlayerConf.id=e,infoMessage.setContent(formatInfoMessage())}
